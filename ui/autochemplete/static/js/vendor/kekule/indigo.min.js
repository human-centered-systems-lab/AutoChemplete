!function(e){"use strict";var t=Kekule.EmscriptenUtils,i="IndigoModule",n="CreateIndigo";Kekule.Indigo={_autoEnabled:!0,_module:null,_indigo:null,SCRIPT_FILE:"indigo.js",HELPER_SCRIPT_FILE:"indigoAdapter.js",_enableFuncs:[],isScriptLoaded:function(){return t.isSupported(i)&&void 0!==e[n]},getModule:function(){return o._module||(o._module=t.getRootModule(i)),o._module},getIndigo:function(){if(!o._indigo){var t=o.getModule();t&&(o._indigo=e[n](t))}return o._indigo},getClassCtor:function(e){return t.getClassCtor(e,o.getModule())},isAvailable:function(){return o.getModule()&&o.getIndigo()},enable:function(e){o.isScriptLoaded()?(o._enableAllFunctions(),e&&e()):o.loadIndigoScript(document,function(){o._enableAllFunctions(),e&&e()})},_enableAllFunctions:function(){if(o.isScriptLoaded())for(var e=o._enableFuncs,t=0,i=e.length;t<i;++t){var n=e[t];n&&n()}}},Kekule.Indigo.getIndigoPath=function(){var e=Kekule.scriptSrcInfo.useMinFile?"extra/":"_extras/Indigo/";return e=Kekule.scriptSrcInfo.path+e},Kekule.Indigo.getIndigoScriptUrl=function(){var e=o.getIndigoPath()+o.SCRIPT_FILE;return Kekule.scriptSrcInfo.useMinFile||(e+=".dev"),e},Kekule.Indigo.getIndigoHelperScriptUrl=function(){return o.getIndigoPath()+o.HELPER_SCRIPT_FILE},Kekule.Indigo.loadIndigoScript=function(e,t){e||(e=document);if(o._scriptLoadedBySelf||o.isScriptLoaded())o._scriptLoadedBySelf=!0,t&&t();else{var i=[o.getIndigoScriptUrl(),o.getIndigoHelperScriptUrl()];Kekule.ScriptFileUtils.appendScriptFiles(e,i,function(){Kekule.Indigo.getIndigo(),t&&t()}),o._scriptLoadedBySelf=!0}};var o=Kekule.Indigo;Kekule.Indigo.AdaptUtils={},Kekule._registerAfterLoadSysProc(function(){o._autoEnabled&&o._enableAllFunctions()})}(this),function(){"use strict";Kekule.EmscriptenUtils;var e=Kekule.Indigo;Kekule.IO.IndigoReader=Class.create(Kekule.IO.ChemDataReader,{CLASS_NAME:"Kekule.IO.InChIWriter",doReadData:function(t,i,n){var o=e.getIndigo(),l=o.loadMoleculeFromString(t);if(l>=0){n===Kekule.IO.DataFormat.SMILES&&(o.setOption("smart-layout","true"),o.layout(l));var r=o.molfile(l);return o.free(l),Kekule.IO.loadFormatData(r,Kekule.IO.DataFormat.MOL)}return null}}),Kekule.IO.registerAllIndigoFormats=function(){e.isAvailable()&&Kekule.IO.ChemDataReaderManager.register("Indigo-smiles",Kekule.IO.IndigoReader,Kekule.IO.DataFormat.SMILES)},Kekule.IO.enableIndigoFormats=function(){e.isAvailable()?Kekule.IO.registerAllIndigoFormats():e.loadIndigoScript(document,function(){Kekule.IO.registerAllIndigoFormats()})},e._enableFuncs.push(Kekule.IO.registerAllIndigoFormats)}();